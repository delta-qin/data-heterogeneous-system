(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aa890220"],{"43d6":function(e,t,a){},"474d":function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return i}));var l=a("b775");function s(e){return Object(l["a"])({url:"/sys-remotedata/remoteDatasource/exeSQL",method:"get",params:e})}function i(e){return Object(l["a"])({url:"/sys-remotedata/remoteDsPanal/signInPanal",method:"post",data:e})}},"81f5":function(e,t,a){"use strict";var l=a("43d6"),s=a.n(l);s.a},"919a":function(e,t,a){"use strict";var l=a("9848"),s=a.n(l);s.a},9848:function(e,t,a){},a15b:function(e,t,a){"use strict";var l=a("23e7"),s=a("44ad"),i=a("fc6a"),n=a("a640"),r=[].join,o=s!=Object,c=n("join",",");l({target:"Array",proto:!0,forced:o||!c},{join:function(e){return r.call(i(this),void 0===e?",":e)}})},a434:function(e,t,a){"use strict";var l=a("23e7"),s=a("23cb"),i=a("a691"),n=a("50c4"),r=a("7b0b"),o=a("65f0"),c=a("8418"),u=a("1dde"),h=a("ae40"),p=u("splice"),d=h("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,f=Math.min,v=9007199254740991,b="Maximum allowed length exceeded";l({target:"Array",proto:!0,forced:!p||!d},{splice:function(e,t){var a,l,u,h,p,d,y=r(this),g=n(y.length),w=s(e,g),x=arguments.length;if(0===x?a=l=0:1===x?(a=0,l=g-w):(a=x-2,l=f(m(i(t),0),g-w)),g+a-l>v)throw TypeError(b);for(u=o(y,l),h=0;h<l;h++)p=w+h,p in y&&c(u,h,y[p]);if(u.length=l,a<l){for(h=w;h<g-l;h++)p=h+l,d=h+a,p in y?y[d]=y[p]:delete y[d];for(h=g;h>g-l+a;h--)delete y[h-1]}else if(a>l)for(h=g-l;h>w;h--)p=h+l-1,d=h+a-1,p in y?y[d]=y[p]:delete y[d];for(h=0;h<a;h++)y[h+w]=arguments[h+2];return y.length=g-l+a,u}})},e1c5:function(e,t,a){},eb6e:function(e,t,a){"use strict";var l=a("e1c5"),s=a.n(l);s.a},f8b8:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"build-container"},[a("el-steps",{attrs:{active:e.active,"finish-status":"success"}},[a("el-step",{attrs:{title:"步骤 1",description:"选择数据源"}},[e._v("1")]),a("el-step",{attrs:{title:"步骤 2",description:"构建面板"}},[e._v("2")]),a("el-step",{attrs:{title:"步骤 3",description:"保存构建"}},[e._v("3")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.active,expression:"active===1"}],staticClass:"step1"},[a("Reader",{ref:"reader"})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:2===e.active,expression:"active===2"}],staticClass:"step2"},[a("Writer",{ref:"writer"})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:3===e.active,expression:"active===3"}],staticClass:"step3"},[a("department",{ref:"department"})],1),a("el-button",{staticStyle:{"margin-top":"12px"},attrs:{disabled:1===e.active},on:{click:e.last}},[e._v("上一步")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:3!=e.active,expression:"active != 3"}],staticStyle:{"margin-top":"12px","margin-bottom":"12px"},attrs:{type:"primary"},on:{click:e.next}},[e._v("下一步")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:3===e.active,expression:"active === 3"}],attrs:{type:"primary"},on:{click:e.next}},[e._v("保存构建")])],1)])},s=[],i=(a("a4d3"),a("e01a"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("el-select",{attrs:{placeholder:"请选择数据源类型"},model:{value:e.choosedTypeID,callback:function(t){e.choosedTypeID=t},expression:"choosedTypeID"}},e._l(e.types,(function(e){return a("el-option",{key:e.id,attrs:{label:e.type,value:e.id}})})),1)],1),a("div",[a("el-table",{staticStyle:{"border-radius":"8px",border:"0px","margin-top":"10px"},attrs:{data:e.dataSources,"header-cell-style":e.setSellStyle,"row-class-name":e.tableRowClassName,stripe:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-table",{attrs:{data:e.databases[t.$index],stripe:""}},[a("el-table-column",{attrs:{align:"center",label:"选择",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(l){return[a("el-radio",{attrs:{label:t.$index+1+"-"+(l.$index+1)},model:{value:e.database,callback:function(t){e.database=t},expression:"database"}})]}}],null,!0)}),a("el-table-column",{attrs:{label:"数据库",prop:"Schema"}})],1)]}}])}),a("el-table-column",{attrs:{label:"ID",prop:"id"}}),a("el-table-column",{attrs:{label:"描述信息",prop:"dbDescription"}}),a("el-table-column",{attrs:{label:"URL",prop:"dbUrl"}}),a("el-table-column",{attrs:{label:"User",prop:"dbUser"}})],1)],1)])}),n=[],r=(a("ac1f"),a("1276"),a("b775")),o={name:"Reader",components:{},watch:{choosedTypeID:{immediate:!0,deep:!0,handler:function(e){if(null!=e&&""!=e){for(var t in this.types)e==this.types[t].id&&(this.choosedType=this.types[t].type);console.log(e),this.fetchDatasource()}}}},data:function(){return{types:[],choosedTypeID:null,choosedType:null,dataSources:[],databases:[],database:"",row:-1}},created:function(){var e=this,t=this;Object(r["b"])("/sys-remotedata/remoteDatasourceType/getInfo").then((function(a){console.log(a),t.types=a.data.rows.reverse(),e.choosedTypeID=e.types[e.types.length-1].id,e.choosedType=e.types[e.types.length-1].type}))},methods:{setSellStyle:function(e){e.row,e.column,e.rowIndex,e.columnIndex;return"background-color:#409EFF;color:#fff;font-wight:200;font-size:15px;"},tableRowClassName:function(e){e.row,e.rowIndex;return"warning-row"},getData:function(){var e=this.database.split("-"),t=e[0]-1,a=e[1]-1;return{id:this.dataSources[t].id,source:this.choosedType+this.dataSources[t].id,schema:this.databases[t][a].Schema}},fetchDatasource:function(){var e=this;this.dataSources=[],this.databases=[],this.database="",Object(r["b"])("/sys-remotedata/remoteDatasource/getInfoByType",{type_id:e.choosedTypeID}).then((function(t){console.log(t),e.dataSources=t.data.rows;for(var a=0,l=e.dataSources.length;a<l;a++)e.databases.push([]),e.fetchDatabase(a)}))},fetchDatabase:function(e){var t=this.dataSources[e].id,a=this;Object(r["b"])("/sys-remotedata/remoteDatasource/getAllSchemas",{id:t}).then((function(t){console.log(t),a.databases[e]=t.data.rows}))}}},c=o,u=(a("eb6e"),a("2877")),h=Object(u["a"])(c,i,n,!1,null,"3a4e7ce7",null),p=h.exports,d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:1.5}},[a("el-form",{staticClass:"demo-form-inline"},[a("el-form-item",{staticStyle:{"min-width":"100px"},attrs:{label:"FROM",inline:!0}})],1)],1),a("el-col",{attrs:{span:15}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.from,callback:function(t){e.from=t},expression:"from"}},e._l(e.fromChoice,(function(e){return a("el-option",{key:e.value,staticStyle:{width:"180px"},attrs:{label:e.label,value:e.value,cle:""}})})),1)],1)],1),a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:1.5}},[a("el-form",{staticClass:"demo-form-inline"},[a("el-form-item",{staticStyle:{"min-width":"100px"},attrs:{label:"SELECT",inline:!0}})],1)],1),a("el-col",{attrs:{span:15}},[a("el-form",{staticClass:"demo-form-inline",attrs:{disabled:""==this.from}},[a("el-form-item",{staticStyle:{color:"white"}},[e._v(" 注意："+e._s(this.notice)+" ")]),a("el-form",{directives:[{name:"show",rawName:"v-show",value:0==e.select.length,expression:"select.length == 0"}]},[a("el-form-item",{attrs:{inline:!0}},[a("div",{staticClass:"el-icon-circle-plus-outline",staticStyle:{color:"white","font-size":"28px"},attrs:{inline:!0},on:{click:e.addSelect}})])],1),e._l(e.select,(function(t,l){return a("el-form-item",[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t[0].value,callback:function(a){e.$set(t[0],"value",a)},expression:"item[0].value"}},e._l(e.selectChoice1,(function(e){return a("el-option",{key:e.value,staticStyle:{width:"180px"},attrs:{label:e.label,value:e.value}})})),1),a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t[1].value,callback:function(a){e.$set(t[1],"value",a)},expression:"item[1].value"}},e._l(e.selectChoice2,(function(e){return a("el-option",{key:e.value,staticStyle:{width:"180px"},attrs:{label:e.label,value:e.value}})})),1),a("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"输入字段别名",inline:!0,clearable:""},model:{value:t[2].value,callback:function(a){e.$set(t[2],"value",a)},expression:"item[2].value"}}),a("div",{staticClass:"el-icon-remove-outline",staticStyle:{color:"white","font-size":"28px","margin-left":"5px"},attrs:{inline:!0},on:{click:function(t){return e.deleteSelect(l)}}})],1)}))],2)],1),a("el-col",{attrs:{span:3}},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:0!=e.select.length,expression:"select.length!=0"}]},[a("el-form-item",{attrs:{inline:!0}},[a("div",{staticClass:"el-icon-circle-plus-outline",staticStyle:{color:"white","font-size":"28px"},attrs:{inline:!0},on:{click:e.addSelect}})])],1)],1)],1),a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:1.5}},[a("el-form",{staticClass:"demo-form-inline"},[a("el-form-item",{staticStyle:{"min-width":"100px"},attrs:{label:"WHERE",inline:!0}})],1)],1),a("el-col",{attrs:{span:15}},[a("el-form",{staticClass:"demo-form-inline",attrs:{disabled:""==this.from}},e._l(e.where,(function(t,l){return a("el-form-item",[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t[0].value,callback:function(a){e.$set(t[0],"value",a)},expression:"item[0].value"}},e._l(e.selectChoice1,(function(e){return a("el-option",{key:e.value,staticStyle:{width:"180px"},attrs:{label:e.label,value:e.value}})})),1),a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t[1].value,callback:function(a){e.$set(t[1],"value",a)},expression:"item[1].value"}},e._l(e.whereChoice2,(function(e){return a("el-option",{key:e.value,staticStyle:{width:"180px"},attrs:{label:e.label,value:e.value}})})),1),a("el-input",{staticStyle:{width:"180px","margin-right":"10px"},attrs:{inline:!0,clearable:""},model:{value:t[2].value,callback:function(a){e.$set(t[2],"value",a)},expression:"item[2].value"}}),a("el-select",{attrs:{placeholder:"请选择and/or",clearable:""},model:{value:t[3].value,callback:function(a){e.$set(t[3],"value",a)},expression:"item[3].value"}},e._l(e.whereChoice3,(function(e){return a("el-option",{key:e.value,staticStyle:{width:"180px"},attrs:{label:e.label,value:e.value}})})),1),a("div",{staticClass:"el-icon-remove-outline",staticStyle:{color:"white","font-size":"28px"},attrs:{inline:!0},on:{click:function(t){return e.deleteWhere(l)}}})],1)})),1)],1),a("el-col",{attrs:{span:3}},[a("el-form",[a("el-form-item",{attrs:{inline:!0}},[a("div",{staticClass:"el-icon-circle-plus-outline",staticStyle:{color:"white","font-size":"28px"},attrs:{inline:!0},on:{click:e.addWhere}})])],1)],1)],1),a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:1.5}},[a("el-form",{staticClass:"demo-form-inline"},[a("el-form-item",{staticStyle:{"min-width":"100px"},attrs:{label:"GROUPBY",inline:!0}})],1)],1),a("el-col",{attrs:{span:15}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,disabled:""==this.from}},[e._l(e.groupBy,(function(t,l){return a("el-form-item",[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}},e._l(e.selectChoice1,(function(e){return a("el-option",{key:e.value,staticStyle:{width:"180px"},attrs:{label:e.label,value:e.value}})})),1)],1)})),0!=e.groupBy.length?a("div",{staticClass:"el-icon-remove-outline",staticStyle:{color:"white","font-size":"28px"},attrs:{inline:!0},on:{click:function(t){return e.deleteGroupBy()}}}):e._e()],2)],1),a("el-col",{attrs:{span:3}},[0==e.groupBy.length?a("div",{staticClass:"el-icon-circle-plus-outline",staticStyle:{color:"white","font-size":"28px"},attrs:{inline:!0},on:{click:e.addGroupBy}}):e._e()])],1),a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:1.5}},[a("el-form",{staticClass:"demo-form-inline"},[a("el-form-item",{staticStyle:{"min-width":"100px"},attrs:{label:"SQL",inline:!0}})],1)],1),a("el-col",{attrs:{span:15}},[a("el-input",{staticStyle:{width:"800px"},attrs:{type:"textarea",autosize:""},model:{value:e.sql,callback:function(t){e.sql=t},expression:"sql"}})],1)],1),a("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:0}},[a("el-col",{attrs:{span:1.5}},[a("el-form",[a("el-form-item",{staticStyle:{"min-width":"100px"},attrs:{label:"面板名称",inline:!0}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-input",{staticClass:"inputName",attrs:{autocomplete:"off"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1)],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.computeChartType,expression:"computeChartType"}],attrs:{gutter:0}},[a("el-col",{attrs:{span:1.5}},[a("el-form",[a("el-form-item",{staticStyle:{"min-width":"100px"},attrs:{label:"横坐标",inline:!0}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{placeholder:"请填写横坐标的属性"},model:{value:e.measurement,callback:function(t){e.measurement=t},expression:"measurement"}})],1)],1),a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:1.5}},[a("el-form",[a("el-form-item",{staticStyle:{"min-width":"100px"},attrs:{label:"面板类型",inline:!0}})],1)],1),a("el-col",{attrs:{span:20}},[a("div",[a("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{icon:"el-icon-s-marketing",type:"line1"==e.chartType?"primary":"info",round:""},on:{click:function(t){return e.selectChartType("line1")}}},[e._v("折线图1 ")]),a("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{icon:"el-icon-s-marketing",type:"line"==e.chartType?"primary":"info",round:""},on:{click:function(t){return e.selectChartType("line")}}},[e._v("折线图2 ")]),a("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{icon:"el-icon-s-marketing",type:"pie"==e.chartType?"primary":"info",round:""},on:{click:function(t){return e.selectChartType("pie")}}},[e._v("饼图 ")]),a("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{icon:"el-icon-s-marketing",type:"transverse"==e.chartType?"primary":"info",round:""},on:{click:function(t){return e.selectChartType("transverse")}}},[e._v("进度条 ")]),a("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{icon:"el-icon-s-marketing",type:"funnel"==e.chartType?"primary":"info",round:""},on:{click:function(t){return e.selectChartType("funnel")}}},[e._v("漏斗图 ")]),a("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{icon:"el-icon-s-marketing",type:"table"==e.chartType?"primary":"info",round:""},on:{click:function(t){return e.selectChartType("table")}}},[e._v("表格 ")]),a("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{icon:"el-icon-s-marketing",type:"heatmap"==e.chartType?"primary":"info",round:""},on:{click:function(t){return e.selectChartType("heatmap")}}},[e._v("热力图 ")])],1)])],1),a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:3}},[a("el-form",[a("el-button",{attrs:{icon:"el-icon-thumb",round:"",type:"success"},on:{click:e.getChartData}},[e._v("图表预览")])],1)],1),a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.flag,expression:"flag"}],attrs:{span:15}},[a("div",{class:{background:"table"!=e.chartType}},[a("chart",{attrs:{chartType:e.chartType,"chart-data1":e.chartData,axis:e.measurement}})],1)])],1)],1)},m=[],f=(a("c975"),a("d81d"),a("a434"),a("474d")),v=a("2524"),b=(a("ed08"),{name:"Writer",components:{chart:v["a"]},computed:{computeChartType:function(){return"line1"==this.chartType||"line"==this.chartType||"transverse"==this.chartType||"heatmap"==this.chartType}},data:function(){return{flag:!1,chartData:[],responseData:[],formatData:{description:"",panalTypeId:0,x:"",sql:""},description:"",measurement:"",formLabelWidth:"80px",chartType:"line1",panalTypeArray:[],notice:"创建一条折线,需要设置横坐标",title:{table:"表格支持任意数量数据",pie:"饼图需要别名，name是分类，value是对应的值",line1:"创建一条折线,需要设置横坐标",line:"创建两条折线\n需要命名横坐标",transverse:"进度图需要三个一一对应的属性，分别命名:name，used，total",funnel:"漏斗图需要将某属性命名为为name",heatmap:"热力图支持的时间格式为:2020-10-06 19:32:38 ,需命名为time,数值需命名为:value"},id:0,source:"",schema:"",sql:"",arithmeticOperator:[{value:"+",label:"+"},{value:"-",label:"-"},{value:"*",label:"*"},{value:"/",label:"/"}],logicalOperator:[{value:" and ",label:"and"},{value:" or ",label:"or"},{value:"==",label:"=="},{value:">=",label:">="},{value:"<=",label:"<="},{value:"<",label:"<"},{value:">",label:">"}],aggregateFun:[{value:" max",label:"max"},{value:" min",label:"min"},{value:" count",label:"count"},{value:" sum",label:"sum"},{value:" avg",label:"avg"}],brackets:[{value:"(",label:"("},{value:")",label:")"}],selectChoice1:[],selectChoice2:[],fromChoice:[],whereChoice1:[],whereChoice2:[],whereChoice3:[],groupByChoice:[],select:[],from:"",where:[],groupBy:[]}},created:function(){this.panalTypeArray=this.$store.getters.panalTypeArray,this.selectChoice1=[],this.selectChoice2=[],this.fromChoice=[],this.whereChoice1=[],this.whereChoice2=[],this.whereChoice3=[],this.groupByChoice=[],this.selectChoice2=this.aggregateFun,this.whereChoice2=[{value:"==",label:"=="},{value:">=",label:">="},{value:"<=",label:"<="},{value:"<",label:"<"},{value:">",label:">"}],this.whereChoice3=[{value:" and ",label:"and"},{value:" or ",label:"or"}],this.groupByChoice.push({})},watch:{select:{handler:function(e,t){this.getSQL()},deep:!0},from:{handler:function(e,t){this.getSQL(),this.lazyLoadHand()},deep:!0},where:{handler:function(e,t){this.getSQL()},deep:!0},groupBy:{handler:function(e,t){this.getSQL()},deep:!0}},methods:{lazyLoadHand:function(){var e=this,t=this;console.log(this.selectChoice1);var a="show columns from "+this.from;f["a"]({sql:a}).then((function(a){console.log(a);var l=a.data.rows.map((function(e,a){return{value:t.from+"."+e.Column,label:e.Column,leaf:!0}}));e.selectChoice1=l})).catch((function(e){console.log(e)}))},lazyLoadFrom:function(){var e=this,t=this,a="show tables from "+t.source+"."+t.schema;console.log(a),f["a"]({sql:a}).then((function(a){console.log(a);var l=a.data.rows.map((function(e,a){return{value:t.source+"."+t.schema+"."+e.Table,label:e.Table}}));e.fromChoice=l,console.log("123",t.fromChoice)}))},setData:function(e,t,a){this.id=e,this.source=t,this.schema=a,console.log(this.source),this.lazyLoadFrom(),this.addSelect()},selectChartType:function(e){this.chartType=e,this.notice=this.title[this.chartType]},getChartData:function(){var e=this;f["a"]({sql:this.sql}).then((function(t){e.responseData=t.data.rows,e.chartData=t.data.rows,console.log(e.chartData),e.flag=!0})).catch((function(e){console.log(e)}))},getData:function(){return this.formatData.panalTypeId=this.panalTypeArray.indexOf(this.chartType),this.formatData.sql=this.sql,this.formatData.description=this.description,this.formatData.x=this.measurement,this.formatData},init:function(){this.select=[],this.from="",this.where=[],this.groupBy=[]},addSelect:function(){this.select.push([{value:""},{value:""},{value:""}])},addWhere:function(){this.where.push([{value:""},{value:""},{value:""},{value:""}])},addGroupBy:function(){this.groupBy.push({value:""})},deleteSelect:function(e){this.select.splice(e,1)},deleteWhere:function(e){this.where.splice(e,1)},deleteGroupBy:function(){this.groupBy=[]},getSQL:function(){var e="";e+=this.getSelect()+"\n",e+=this.getFrom()+"\n",e+=this.getWhere()+"\n",e+=this.getGroupBy()+"\n",console.log(e),this.sql=e},getSelect:function(){if(0==this.select.length)return"";var e=" SELECT ";console.log(this.select);for(var t=0;t<this.select.length;t++){var a=this.select[t][0].value,l=this.select[t][1].value,s=this.select[t][2].value;if(null!=a&&""!=a){var i="";i+=a,e+=null!=l&&""!=l?l+"("+i+") ":i+" ",e+=null!=s&&""!=s?"as "+s+",":","}}return e.substring(0,e.length-1)},getFrom:function(){if(""!=this.from){var e=" FROM "+this.from+" ";return e}return""},getWhere:function(){if(0==this.where.length)return"";var e=" WHERE ";console.log(this.where);for(var t=0;t<this.where.length;t++){var a=this.where[t][0].value,l=this.where[t][1].value,s=this.where[t][2].value,i=this.where[t][3].value;0!=a.length&&(e+=a+" "+(0!=l.length?l:"")+s+(0!=i.length?i:""))}return e},getGroupBy:function(){if(0==this.groupBy.length)return"";for(var e=" GROUP BY ",t=0;t<this.groupBy.length;t++){var a=this.groupBy[t].value;e+=a}return e}}}),y=b,g=(a("919a"),Object(u["a"])(y,d,m,!1,null,"62876f58",null)),w=g.exports,x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticStyle:{color:"white",margin:"10px 0 10px"}},[e._v("选择面板所属部门")])]),a("el-col",{attrs:{span:22}},[a("el-table",{staticStyle:{"border-radius":"8px",border:"0px",width:"100%",margin:"10px 0 10px"},attrs:{data:e.tableData,"header-cell-style":e.setSellStyle}},[a("el-table-column",{attrs:{align:"center",label:"选择",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.$index+1},model:{value:e.depart,callback:function(t){e.depart=t},expression:"depart"}})]}}])}),a("el-table-column",{attrs:{label:"id",prop:"id"}}),a("el-table-column",{attrs:{label:"部门名字",prop:"name"}}),a("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("修改")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])},[a("template",{slot:"header"},[a("el-button",{on:{click:e.addNew}},[e._v("添加部门")])],1)],2)],1)],1)],1)],1)},S=[],C=(a("b0c0"),a("f890")),k={data:function(){return{tableData:[],depart:0,dialog:!1,formLabelWidth:"80px",drawerTitle:"添加部门",loading:!1,name:"",form:{id:"",name:""}}},methods:{getData:function(){return this.tableData[this.depart-1].id},handleEdit:function(e,t){var a=this;console.log(e,t),this.$prompt("请输入新的部门名","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPlaceholder:t.name}).then((function(e){var l=e.value,s={id:t.id,name:l};C["j"](s).then((function(e){200==e.code?(a.$message({type:"success",message:"修改成功"}),a.getDepartment()):a.$message({type:"error",message:"修改失败"})}))})).catch((function(){a.$message({type:"info",message:"取消修改"})}))},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除该部门, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){C["b"]({id:t.id}).then((function(e){200==e.code?(a.$message({type:"success",message:"删除成功!"}),a.getDepartment()):a.$message({type:"error",message:"删除失败"})}))})).catch((function(){a.$message({type:"info",message:"取消删除"})}))},addNew:function(){var e=this;this.$prompt("请输入新的部门名","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(t){var a=t.value;C["g"]({name:a}).then((function(t){200==t.code?(e.$message({type:"success",message:"新增成功"}),e.getDepartment()):e.$message({type:"error",message:"新增失败"})}))})).catch((function(){e.$message({type:"info",message:"取消新增"})}))},setSellStyle:function(e){e.row,e.column,e.rowIndex,e.columnIndex;return"background-color:#409EFF;color:#fff;font-wight:200;font-size:15px;"},getDepartment:function(){var e=this;C["d"]().then((function(t){e.tableData=t.data}))}}},D=k,T=Object(u["a"])(D,x,S,!1,null,"431c54e7",null),_=T.exports,$={name:"JsonBuild",components:{Reader:p,Writer:w,department:_},data:function(){return{active:1,formData:{dbId:0,departmentId:0,description:"",panalTypeId:0,sqlWords:"",state:0,x:""},mapperData:{}}},created:function(){},methods:{next:function(){switch(this.active){case 1:var e=this.$refs.reader.getData();this.$refs.writer.init(),this.$refs.writer.setData(e.id,e.source,e.schema),this.formData.dbId=e.id,this.active++;break;case 2:this.mapperData=this.$refs.writer.getData();var t=Object.assign({},this.mapperData);console.log(this.formData),this.formData.description=t.description,this.formData.panalTypeId=t.panalTypeId,this.formData.x=t.x,this.formData.state=0,this.$refs.department.getDepartment(),this.formData.sqlWords=t.sql,this.active++;break;case 3:this.formData.departmentId=this.$refs.department.getData(),this.savePanal();break}},last:function(){this.active>1&&this.active--},panalList:function(){this.$router.push({path:"/panal/list"})},savePanal:function(){var e=this;console.log(this.formData),f["b"](this.formData).then((function(){e.$message({type:"success",message:"保存成功"}),e.$router.push({path:"/panal/list"})}))}}},B=$,I=(a("81f5"),Object(u["a"])(B,l,s,!1,null,null,null));t["default"]=I.exports}}]);