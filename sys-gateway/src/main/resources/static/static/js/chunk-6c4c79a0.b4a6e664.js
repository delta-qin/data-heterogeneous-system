(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c4c79a0"],{"0676":function(e,t,r){},b56a:function(e,t,r){"use strict";var o=r("0676"),i=r.n(o);i.a},d5c2:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"poster"}},[r("body",[r("el-form",{ref:"registerForm",staticClass:"register-container",attrs:{model:e.registerForm,rules:e.rules,"label-position":"left","label-width":"0px"}},[r("h3",{staticClass:"register_title"},[e._v("用户注册")]),r("el-form-item",{attrs:{prop:"email"}},[r("el-input",{attrs:{type:"phone","auto-complete":"off",placeholder:"请输入邮箱"},model:{value:e.registerForm.email,callback:function(t){e.$set(e.registerForm,"email",t)},expression:"registerForm.email"}})],1),r("el-form-item",{attrs:{prop:"phone"}},[r("el-input",{attrs:{type:"phone","auto-complete":"on",placeholder:"请输入手机号"},model:{value:e.registerForm.phone,callback:function(t){e.$set(e.registerForm,"phone",t)},expression:"registerForm.phone"}})],1),r("el-form-item",{attrs:{prop:"code"}},[r("el-input",{staticStyle:{width:"70%"},attrs:{type:"text",placeholder:"请输入验证码"},model:{value:e.registerForm.code,callback:function(t){e.$set(e.registerForm,"code",t)},expression:"registerForm.code"}}),r("el-button",{staticStyle:{width:"30%"},attrs:{id:"codeButton",type:"warning"},on:{click:e.getCode}},[e._v(" 获取验证码")])],1),r("el-form-item",{attrs:{rules:{required:!0,message:"公司不能为空",trigger:"blur"}}},[r("el-input",{ref:"cid",staticStyle:{width:"70%"},attrs:{placeholder:"请选择公司",name:"cid",type:"text",disabled:!0},model:{value:e.company,callback:function(t){e.company=t},expression:"company"}}),r("el-button",{staticStyle:{width:"30%"},attrs:{type:"warning"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("选择公司")])],1),r("el-form-item",{attrs:{prop:"ccode"}},[r("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入公司秘钥"},model:{value:e.registerForm.ccode,callback:function(t){e.$set(e.registerForm,"ccode",t)},expression:"registerForm.ccode"}})],1),r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{type:"username","auto-complete":"off",placeholder:"请设置用户名"},model:{value:e.registerForm.username,callback:function(t){e.$set(e.registerForm,"username",t)},expression:"registerForm.username"}})],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password","show-password":"","auto-complete":"off",placeholder:"请设置密码"},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password",t)},expression:"registerForm.password"}})],1),r("el-form-item",{attrs:{prop:"nickName"}},[r("el-input",{attrs:{type:"nickName","auto-complete":"off",placeholder:"请设置昵称"},model:{value:e.registerForm.nickName,callback:function(t){e.$set(e.registerForm,"nickName",t)},expression:"registerForm.nickName"}})],1),r("el-form-item",{staticStyle:{width:"100%"}},[r("el-button",{staticStyle:{width:"100%",background:"#505458",border:"none"},attrs:{type:"primary"},on:{click:function(t){return e.gotoTest("registerForm")}}},[e._v("全部重置")])],1),r("el-form-item",{staticStyle:{width:"100%"}},[r("el-button",{staticStyle:{width:"100%",background:"#505458",border:"none"},attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.register("registerForm")}}},[e._v("立即注册")])],1)],1)],1),r("el-dialog",{attrs:{title:"选择公司",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"公司名字"},model:{value:e.company,callback:function(t){e.company=t},expression:"company"}}),r("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.fetchData}},[e._v(" 搜索 ")]),r("el-table",{attrs:{data:e.gridData}},[r("el-table-column",{attrs:{property:"id",label:"公司id"}}),r("el-table-column",{attrs:{property:"name",label:"公司名"}}),r("el-table-column",{attrs:{label:"选择"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"primary"},on:{click:function(r){return e.choose(t.$index,t.row)}}},[e._v("选 择 ")])]}}])})],1),r("el-pagination",{staticClass:"showPage",attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":e.pageNum,"page-size":e.pageSize,"page-sizes":[1,10,20,50],total:e.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1)},i=[],s=(r("b0c0"),r("61f7")),a=r("b775"),n={name:"Register",data:function(){var e=this,t=function(e,t,r){""==t?r(new Error("请设置密码！")):t.length<6?r(new Error("密码长度不小于6位！")):r()},r=function(e,t,r){""==t?r(new Error("用户名不能为空！")):r()},o=function(t,r,o){""==r?o(new Error("手机号不能为空！")):Object(s["c"])(r)?(e.sendAuthCode=!0,o()):o(new Error("请输入正确的手机号码！"))},i=function(e,t,r){""==t?r(new Error("邮箱不能为空！")):Object(s["b"])(t)?r():r(new Error("请输入正确的邮箱！"))},a=function(e,t,r){""==t?r(new Error("验证码不能为空！")):r()},n=function(e,t,r){""==t?r(new Error("请输入至少一个字符！")):r()};return{company:"",pageNum:1,pageSize:10,total:10,formLabelWidth:"120px",gridData:[],dialogFormVisible:!1,className:2222,resultNum:0,responseResult:[],loading:!1,resendCode:!1,auth_time:0,isAble:!0,verification:"",registerForm:{username:"",icon:"",code:"",email:"",phone:"",password:"",nickName:"",note:"",cid:0,ccode:""},rules:{email:[{required:!0,trigger:"blur",validator:i}],nickName:[{required:!0,trigger:"blur",validator:n}],password:[{required:!0,trigger:"blur",validator:t}],phone:[{required:!0,trigger:"blur",validator:o}],username:[{required:!0,trigger:"blur",validator:r}],code:[{required:!0,trigger:"blur",validator:a}]}}},methods:{choose:function(e){this.dialogFormVisible=!1,console.log("fuck",this.gridData[e].name),this.registerForm.cid=this.gridData[e].id,this.company=this.gridData[e].name,console.log("com1",this.company)},fetchData:function(){var e=this;console.log(this.company);this.listLoading=!0,Object(a["b"])("/sys-user/company/"+this.company,{pageNum:this.pageNum,pageSize:this.pageSize}).then((function(t){console.log(t),e.gridData=t.list}))},test:function(){var e=this.$service.response.data;alert(e.code)},gotoTest:function(){this.$router.push("/test")},getCode:function(){var e=this,t=this;Object(s["c"])(t.registerForm.phone)?Object(a["c"])("/sys-user/admin/code?phone="+t.registerForm.phone).then((function(r){console.log("获取验证码成功",r),t.$message({message:"验证码已发送，请注意查收",type:"success"}),e.resendCode=!0,e.auth_time=60;var o=setInterval((function(){t.auth_time--;var r=document.getElementById("codeButton");r.innerText=t.auth_time+"秒后可重发验证码",e.auth_time<=0?(e.resendCode=!1,clearInterval(o),r.innerText="获取验证码",r.disabled=!1):r.disabled=!0}),1e3)})).catch((function(e){return console.log(e)})):""!=t.registerForm.phone?t.$message({showClose:!0,message:"请输入正确的手机号码！",type:"error"}):t.$message({showClose:!0,message:"请先填写手机号码！",type:"error"})},register:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;Object(a["c"])("/sys-user/admin/register?code="+t.registerForm.code+"&ccode="+t.registerForm.ccode,{email:t.registerForm.email,icon:t.registerForm.icon,nickName:t.registerForm.nickName,note:t.registerForm.note,password:t.registerForm.password,phone:t.registerForm.phone,username:t.registerForm.username,cid:t.registerForm.cid}).then((function(e){t.$message({message:"注册成功！",type:"success"}),t.$router.push("/login")})).catch((function(e){return console.log(e)}))}))},resetForm:function(e){this.$refs[e].resetFields()}}},l=n,c=(r("b56a"),r("2877")),m=Object(c["a"])(l,o,i,!1,null,null,null);t["default"]=m.exports}}]);