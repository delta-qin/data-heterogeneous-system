(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-279c3e1d"],{"1ca8":function(t,e,a){"use strict";a.d(e,"f",(function(){return r})),a.d(e,"e",(function(){return s})),a.d(e,"b",(function(){return i})),a.d(e,"a",(function(){return o})),a.d(e,"i",(function(){return c})),a.d(e,"j",(function(){return l})),a.d(e,"g",(function(){return d})),a.d(e,"h",(function(){return u})),a.d(e,"c",(function(){return f})),a.d(e,"d",(function(){return p}));var n=a("b775");function r(){return Object(n["a"])({url:"/sys-remotedata/remoteDsPanal/getAllPanalOnHomePage",method:"get"})}function s(){return Object(n["a"])({url:"/sys-remotedata/remoteDsPanal/getAllPanal",method:"get"})}function i(t){return Object(n["a"])({url:"/sys-remotedata/remoteDsPanal/deletePanal",method:"delete",params:t})}function o(t){return Object(n["a"])({url:"/sys-remotedata/remoteDsPanal/changeState",method:"put",params:t})}function c(){return Object(n["a"])({url:"/sys-remotedata/getSourceNum",method:"get"})}function l(){return Object(n["a"])({url:"/sys-remotedata/getUserNum",method:"get"})}function d(){return Object(n["a"])({url:"/sys-remotedata/getLoginAtToday",method:"get"})}function u(){return Object(n["a"])({url:"/sys-remotedata/getSourceMap",method:"get"})}function f(t){return Object(n["a"])({url:"/sys-influx/influx/search/all/preserved",method:"get",params:t})}function p(t){return Object(n["a"])({url:"/sys-influx/influx/all/info",method:"get",params:t})}},"43f4":function(t,e,a){"use strict";var n=a("f5ab"),r=a.n(n);r.a},"695c":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"panal"},[a("h1",[t._v("<"+t._s(t.company)+">--企业监控面板")]),a("div",{staticClass:"panel-footer"})]),t._l(t.departments,(function(e){return a("div",{staticClass:"panal"},[a("h1",[t._v("<"+t._s(t.company)+">--"+t._s(e.name))]),a("el-row",{attrs:{gutter:20}},[t._l(t.fetchedPanalData,(function(n){return e.id==n.panal.departmentId?a("div",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"panal1"},[a("h2",[t._v(t._s(n.panal.description))]),a("div",{staticClass:"chart"},[a("chart",{attrs:{"chart-type":t.panalTypeArray[n.panal.panalTypeId],"chart-data1":n.rows,axis:n.panal.x}})],1),a("div",{staticClass:"panel-footer"})]),a("el-row",{attrs:{gutter:7}},[a("el-col",{attrs:{span:8}},[a("div",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"panal2",domProps:{textContent:t._s(1==n.panal.state?"从首页删除":"添加到首页")},on:{click:function(e){return t.changeState(n)}}})]),a("el-col",{attrs:{span:8}},[a("div",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"panal2",on:{click:function(e){return t.removeChart(n.panal)}}},[t._v("删除 ")])])],1)],1)],1):t._e()})),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"panal1"},[a("div",{staticClass:"el-icon-circle-plus-outline add-icon",on:{click:function(e){return t.addNewChart()}}}),a("div",{staticClass:"panel-footer"})])])],2),a("div",{staticClass:"panel-footer"})],1)})),a("div",{staticClass:"panal"},[a("h1",[t._v(t._s(this.$route.query.dbName)+"--其他")]),a("el-row",{attrs:{gutter:20}},[t._l(t.fetchedPanalData,(function(e){return t.showOthers(e.panal.departmentId)?a("div",[t._v(" "+t._s(e.panal.departmentId)+" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"panal1"},[a("h2",[t._v(t._s(e.panal.description))]),a("div",{staticClass:"chart"},[a("chart",{attrs:{"chart-type":t.panalTypeArray[e.panal.panalTypeId],"chart-data1":e.rows,axis:e.panal.x}})],1),a("div",{staticClass:"panel-footer"})]),a("el-row",{attrs:{gutter:7}},[a("el-col",{attrs:{span:8}},[a("div",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"panal2",domProps:{textContent:t._s(1==e.panal.state?"从首页删除":"添加到首页")},on:{click:function(a){return t.changeState(e)}}})]),a("el-col",{attrs:{span:8}},[a("div",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"panal2",on:{click:function(a){return t.removeChart(e.panal)}}},[t._v("删除 ")])])],1)],1)],1):t._e()})),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"panal1"},[a("div",{staticClass:"el-icon-circle-plus-outline add-icon",on:{click:function(e){return t.addNewChart()}}}),a("div",{staticClass:"panel-footer"})])])],2),a("div",{staticClass:"panel-footer"})],1)],2)},r=[],s=(a("4160"),a("c975"),a("a434"),a("159b"),a("c7a7")),i=(a("c638"),a("f890")),o=a("2524"),c=a("1ca8"),l={name:"index",directives:{waves:s["a"]},components:{chart:o["a"]},computed:{SQLStatement:function(){var t=(new Date).valueOf(),e=new Date;e.setTime(e.getTime()-864e5);var a=e.valueOf();return'SELECT mean("'+this.field+'") FROM "'+this.measurement+'" WHERE time >= '+a+"ms and time <= "+t+"ms GROUP BY time(10s)"}},watch:{measurement:function(t,e){null!=t&&""!=t&&(this.getField(),this.field="")},value2:function(t,e){console.log(t)}},data:function(){return{departments:[],departmentIds:[],company:"",fetchedPanalData:[],chartData:[],chartType:"line1",drawerTitle:"",table:!1,dialog:!1,loading:!1,formatData:{panalName:"",panalTypeId:0,dbId:"",sqlStatement:""},formLabelWidth:"80px",timer:null,pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},value2:"",DBIndex:0,measurement:"",measurements:[],field:"",fields:[],panalTypeArray:[]}},created:function(){this.company=this.$store.getters.company.company,this.panalTypeArray=this.$store.getters.panalTypeArray,this.init()},methods:{init:function(){this.company=this.$store.getters.company.company,console.log(this.$route.query),this.preserved()},showOthers:function(t){return null==t||void 0==t||-1!=this.departmentIds.indexOf(t)},preserved:function(){var t=this;this.departmentsIds=[],this.fetchedPanalData=[],i["d"]().then((function(e){console.log(e),t.departments=e.data,t.departmentsIds=[],e.data.forEach((function(e){t.departmentsIds.push(e.id)})),console.log(t.departmentIds)})),c["e"]().then((function(e){console.log(e),t.fetchedPanalData=e.data.rows,console.log(t.fetchedPanalData)}))},changeState:function(t){if(0==t.panal.state){var e=0;for(var a in this.fetchedPanalData)1==this.fetchedPanalData[a].panal.state&&e++;if(e>=5)return void this.$message({type:"error",message:"当前首页面板已达最大数目"})}c["a"]({id:t.panal.id}).then((function(e){console.log(e),t.panal.state=1-t.panal.state}))},addNewChart:function(){this.$router.push({path:"/panal/add"})},removeChart:function(t){var e=this;this.$confirm("此操作将永久删除该面板, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){console.log(t),c["b"]({id:t.id}).then((function(a){200==a.code&&(e.$message({type:"success",message:"删除成功!"}),e.deleteFromList(t.id))}))})).catch((function(){e.$message({type:"info",message:"取消删除"})}))},deleteFromList:function(t){for(var e in this.fetchedPanalData)if(this.fetchedPanalData[e].panal.id==t){this.fetchedPanalData.splice(e,1);break}}}},d=l,u=(a("43f4"),a("2877")),f=Object(u["a"])(d,n,r,!1,null,"4276a80c",null);e["default"]=f.exports},"8d41":function(t,e,a){},a15b:function(t,e,a){"use strict";var n=a("23e7"),r=a("44ad"),s=a("fc6a"),i=a("a640"),o=[].join,c=r!=Object,l=i("join",",");n({target:"Array",proto:!0,forced:c||!l},{join:function(t){return o.call(s(this),void 0===t?",":t)}})},a434:function(t,e,a){"use strict";var n=a("23e7"),r=a("23cb"),s=a("a691"),i=a("50c4"),o=a("7b0b"),c=a("65f0"),l=a("8418"),d=a("1dde"),u=a("ae40"),f=d("splice"),p=u("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,h=Math.min,v=9007199254740991,g="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!f||!p},{splice:function(t,e){var a,n,d,u,f,p,y=o(this),w=i(y.length),b=r(t,w),x=arguments.length;if(0===x?a=n=0:1===x?(a=0,n=w-b):(a=x-2,n=h(m(s(e),0),w-b)),w+a-n>v)throw TypeError(g);for(d=c(y,n),u=0;u<n;u++)f=b+u,f in y&&l(d,u,y[f]);if(d.length=n,a<n){for(u=b;u<w-n;u++)f=u+n,p=u+a,f in y?y[p]=y[f]:delete y[p];for(u=w;u>w-n+a;u--)delete y[u-1]}else if(a>n)for(u=w-n;u>b;u--)f=u+n-1,p=u+a-1,f in y?y[p]=y[f]:delete y[p];for(u=0;u<a;u++)y[u+b]=arguments[u+2];return y.length=w-n+a,d}})},c638:function(t,e,a){"use strict";a.d(e,"d",(function(){return r})),a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return i})),a.d(e,"e",(function(){return o})),a.d(e,"c",(function(){return c}));var n=a("b775");function r(t){return Object(n["a"])({url:"/sys-influx/influx/search",method:"get",params:t})}function s(t){return Object(n["a"])({url:"/sys-influx/influx/save/panal",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/sys-influx/influx/delete/panal/info",method:"delete",params:t})}function o(t){return Object(n["a"])({url:"/sys-influx/influx/update/panal/info",method:"put",data:t})}function c(t){return Object(n["a"])({url:"/sys-influx/influx/search/all/preserved",method:"get",params:t})}},c7a7:function(t,e,a){"use strict";a("8d41");var n="@@wavesContext";function r(t,e){function a(a){var n=Object.assign({},e.value),r=Object.assign({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},n),s=r.ele;if(s){s.style.position="relative",s.style.overflow="hidden";var i=s.getBoundingClientRect(),o=s.querySelector(".waves-ripple");switch(o?o.className="waves-ripple":(o=document.createElement("span"),o.className="waves-ripple",o.style.height=o.style.width=Math.max(i.width,i.height)+"px",s.appendChild(o)),r.type){case"center":o.style.top=i.height/2-o.offsetHeight/2+"px",o.style.left=i.width/2-o.offsetWidth/2+"px";break;default:o.style.top=(a.pageY-i.top-o.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",o.style.left=(a.pageX-i.left-o.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return o.style.backgroundColor=r.color,o.className="waves-ripple z-active",!1}}return t[n]?t[n].removeHandle=a:t[n]={removeHandle:a},a}e["a"]={bind:function(t,e){t.addEventListener("click",r(t,e),!1)},update:function(t,e){t.removeEventListener("click",t[n].removeHandle,!1),t.addEventListener("click",r(t,e),!1)},unbind:function(t){t.removeEventListener("click",t[n].removeHandle,!1),t[n]=null,delete t[n]}}},f5ab:function(t,e,a){}}]);