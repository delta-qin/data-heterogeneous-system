(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-265bc0e6"],{"43b0":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.actAdd}},[e._v(" 添加 ")])],1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.influxInfo,expression:"influxInfo"}]},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{"border-radius":"8px",border:"0px"},attrs:{data:e.influxdb,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":"","header-cell-style":e.setSellStyle}},[i("el-table-column",{attrs:{align:"center",label:"序号",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.$index))]}}])}),i("el-table-column",{attrs:{align:"center",prop:"id",label:"ID",width:"200"}}),i("el-table-column",{attrs:{align:"center",prop:"username",label:"influx用户名",width:"150"}}),i("el-table-column",{attrs:{align:"center",prop:"sourceName",label:"数据源名称",width:"200"}}),i("el-table-column",{attrs:{align:"center",prop:"dbName",label:"数据库名字",width:"200"}}),i("el-table-column",{attrs:{align:"center",prop:"url",label:"URL"}}),i("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(i){return e.open(t.$index,t.row)}}},[e._v("编辑")]),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.deleteInflux(t.$index)}}},[e._v("删除")]),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){return e.showPanel(t.$index)}}},[e._v("进入资源面板")])]}}])})],1),i("el-pagination",{staticClass:"showPage",attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":e.pageNum,"page-size":e.pageSize,"page-sizes":[1,10,20,50],total:e.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}}),i("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{attrs:{model:e.currInfo,rules:e.rules}},[i("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth,prop:"username"}},[i("el-input",{staticStyle:{width:"40%"},attrs:{placeholder:"请设置influx用户名",autocomplete:"off"},model:{value:e.currInfo.username,callback:function(t){e.$set(e.currInfo,"username",t)},expression:"currInfo.username"}})],1),e.visible?i("el-form-item",{attrs:{label:"密码","label-width":e.formLabelWidth,prop:"password"}},[i("el-input",{staticStyle:{width:"40%"},attrs:{type:"password",placeholder:"请设置influx密码"},model:{value:e.currInfo.password,callback:function(t){e.$set(e.currInfo,"password",t)},expression:"currInfo.password"}},[i("i",{staticClass:"el-icon-view",staticStyle:{cursor:"pointer"},attrs:{slot:"suffix",title:"显示密码"},on:{click:function(t){return e.changePass("show")}},slot:"suffix"})])],1):i("el-form-item",{attrs:{label:"密码","label-width":e.formLabelWidth,prop:"password"}},[i("el-input",{staticStyle:{width:"40%"},attrs:{type:"text",placeholder:"请设置influx密码"},model:{value:e.currInfo.password,callback:function(t){e.$set(e.currInfo,"password",t)},expression:"currInfo.password"}},[i("i",{staticClass:"el-icon-check",staticStyle:{cursor:"pointer"},attrs:{slot:"suffix",title:"隐藏密码"},on:{click:function(t){return e.changePass("hide")}},slot:"suffix"})])],1),i("el-form-item",{attrs:{label:"数据库名字","label-width":e.formLabelWidth,prop:"dbName"}},[i("el-input",{staticStyle:{width:"40%"},attrs:{placeholder:"请设置数据库名字",autocomplete:"off"},model:{value:e.currInfo.dbName,callback:function(t){e.$set(e.currInfo,"dbName",t)},expression:"currInfo.dbName"}})],1),i("el-form-item",{attrs:{label:"数据源名称","label-width":e.formLabelWidth,prop:"sourceName"}},[i("el-input",{staticStyle:{width:"40%"},attrs:{placeholder:"请设置数据源名称",autocomplete:"off"},model:{value:e.currInfo.sourceName,callback:function(t){e.$set(e.currInfo,"sourceName",t)},expression:"currInfo.sourceName"}})],1),i("el-form-item",{attrs:{label:"URL","label-width":e.formLabelWidth,prop:"url"}},[i("el-input",{staticStyle:{width:"40%"},attrs:{placeholder:"请设置数据库url",autocomplete:"off"},model:{value:e.currInfo.url,callback:function(t){e.$set(e.currInfo,"url",t)},expression:"currInfo.url"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.ping}},[e._v("Test Ping")]),i("el-button",{on:{click:e.cancelEdit}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.getAction}},[e._v("确 定")])],1)],1)],1)])},l=[],s=i("b775"),r={name:"getInfo",data:function(){return{total:0,listLoading:!1,username:void 0,influxdb:[],currInfo:{},influxInfo:!1,currentID:0,formLabelWidth:"100px",dialogFormVisible:!1,action:void 0,dialogTitle:void 0,showID:void 0,pageNum:1,pageSize:10,visible:!0,rules:{sourceName:[{required:!0,message:"this is required",trigger:"blur"}],username:[{required:!0,message:"this is required",trigger:"blur"}],password:[{required:!0,message:"this is required",trigger:"blur"}],url:[{required:!0,message:"this is required",trigger:"blur"}],dbName:[{required:!0,message:"this is required",trigger:"blur"}]}}},created:function(){this.getInfo()},methods:{setSellStyle:function(e){e.row,e.column,e.rowIndex,e.columnIndex;return"background-color:#409EFF;color:#fff;font-wight:200;font-size:15px;"},changePass:function(e){this.visible=!("show"===e)},handleSizeChange:function(e){this.pageSize=e,this.getInflux()},handleCurrentChange:function(e){this.pageNum=e,this.getInflux()},actAdd:function(){this.action=0,this.showID=!0,this.currInfo={},this.dialogTitle="添加influx数据库",this.dialogFormVisible=!0},getAction:function(){0==this.action?this.addInflux():this.update()},getInfo:function(){this.influxInfo=!0,this.getInflux()},getInflux:function(){var e=this;Object(s["b"])("/sys-influx/influx/all/info").then((function(t){e.influxdb=t.data,e.$message({message:"获取成功！",type:"success"})})).catch((function(e){return console.log(e)}))},search:function(){},cancelEdit:function(){this.dialogFormVisible=!1,this.$message("已取消编辑")},ping:function(){var e=this;Object(s["c"])("/sys-influx/influx/ping",this.currInfo).then((function(t){e.$message({message:"当前状态；可连通",type:"success"})})).catch((function(e){return console.log(e)}))},open:function(e){this.dialogFormVisible=!0,this.action=1,this.showID=!1,this.dialogTitle="编辑influx数据库信息",this.currentID=this.influxdb[e].id,this.currInfo=Object.assign({},this.influxdb[e]),console.log(this.currInfo)},addInflux:function(){var e=this,t=this;Object(s["c"])("/sys-influx/influx/saveinfo",this.currInfo).then((function(i){t.$message({message:"保存成功！",type:"success"}),e.dialogFormVisible=!1,t.getInflux(),t.currInfo=[]}))},update:function(){var e=this;e.dialogFormVisible=!1,Object(s["c"])("/sys-influx/influx/updateinfo",this.currInfo).then((function(t){e.$message({message:"修改成功！",type:"success"}),e.getInflux(),e.currInfo=[]}))},deleteInflux:function(e){var t=this,i=t.influxdb[e].id;Object(s["b"])("/sys-influx/influx/deleteinfo?id="+i).then((function(e){t.$message({message:"删除成功",type:"success"}),t.getInflux()}))},showPanel:function(e){this.$router.push({path:"/influx/panal/",query:{dbId:this.influxdb[e].id,dbName:this.influxdb[e].sourceName}})}}},o=r,a=(i("f8cd"),i("2877")),u=Object(a["a"])(o,n,l,!1,null,"efb4489a",null);t["default"]=u.exports},"54db":function(e,t,i){},f8cd:function(e,t,i){"use strict";var n=i("54db"),l=i.n(n);l.a}}]);