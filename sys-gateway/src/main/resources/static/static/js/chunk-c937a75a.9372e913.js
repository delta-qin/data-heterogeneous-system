(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c937a75a"],{"1ca8":function(t,e,l){"use strict";l.d(e,"f",(function(){return n})),l.d(e,"e",(function(){return i})),l.d(e,"b",(function(){return r})),l.d(e,"a",(function(){return d})),l.d(e,"i",(function(){return o})),l.d(e,"j",(function(){return s})),l.d(e,"g",(function(){return c})),l.d(e,"h",(function(){return u})),l.d(e,"c",(function(){return p})),l.d(e,"d",(function(){return h}));var a=l("b775");function n(){return Object(a["a"])({url:"/sys-remotedata/remoteDsPanal/getAllPanalOnHomePage",method:"get"})}function i(){return Object(a["a"])({url:"/sys-remotedata/remoteDsPanal/getAllPanal",method:"get"})}function r(t){return Object(a["a"])({url:"/sys-remotedata/remoteDsPanal/deletePanal",method:"delete",params:t})}function d(t){return Object(a["a"])({url:"/sys-remotedata/remoteDsPanal/changeState",method:"put",params:t})}function o(){return Object(a["a"])({url:"/sys-remotedata/getSourceNum",method:"get"})}function s(){return Object(a["a"])({url:"/sys-remotedata/getUserNum",method:"get"})}function c(){return Object(a["a"])({url:"/sys-remotedata/getLoginAtToday",method:"get"})}function u(){return Object(a["a"])({url:"/sys-remotedata/getSourceMap",method:"get"})}function p(t){return Object(a["a"])({url:"/sys-influx/influx/search/all/preserved",method:"get",params:t})}function h(t){return Object(a["a"])({url:"/sys-influx/influx/all/info",method:"get",params:t})}},"20b7":function(t,e,l){"use strict";l.r(e);var a=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticStyle:{padding:"0 10px 0"}},[l("el-table",{staticStyle:{"border-radius":"8px"},attrs:{data:t.tableData,border:"",fit:"","highlight-current-row":"","header-cell-style":t.setSellStyle}},[l("el-table-column",{attrs:{align:"center",prop:"predict.id",label:"预警ID"}}),l("el-table-column",{attrs:{align:"center",prop:"panal.id",label:"面板ID"}}),l("el-table-column",{attrs:{align:"center",prop:"panal.panalName",label:"面板名字"}}),l("el-table-column",{attrs:{align:"center",prop:"predict.threshold",label:"阈值"}}),l("el-table-column",{attrs:{align:"center",prop:"predict.method",label:"预警算法"}}),l("el-table-column",{attrs:{align:"center",prop:"predict.phone",label:"联系人电话"}}),l("el-table-column",{attrs:{align:"left",prop:"panal.sqlStatement",label:"sql语句"}}),l("el-table-column",{attrs:{align:"center",width:"246px"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(l){return t.editPredict(e.row)}}},[t._v("修改")]),l("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(l){return t.delePredict(e.row)}}},[t._v("删除")])]}}])},[l("template",{slot:"header"},[l("el-button",{on:{click:function(e){return t.addPredict()}}},[t._v("添加预警 ")])],1)],2)],1),l("el-dialog",{attrs:{title:"新增预警",visible:t.adding,width:"30%","before-close":t.close},on:{"update:visible":function(e){t.adding=e}}},[l("el-form",{attrs:{"label-width":"100px"}},[l("el-form-item",{attrs:{label:"influxID"}},[l("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.influxID,callback:function(e){t.influxID=e},expression:"influxID"}},t._l(t.influxDBs,(function(t){return l("el-option",{key:t.id,attrs:{label:t.sourceName,value:t.id}})})),1)],1),l("el-form-item",{attrs:{label:"面板名"}},[l("el-select",{attrs:{disabled:null==t.influxID||""==t.influxID,clearable:"",placeholder:"请选择"},model:{value:t.panalRow,callback:function(e){t.panalRow=e},expression:"panalRow"}},t._l(t.panals,(function(e){return l("el-option",{key:e.id,attrs:{label:e.panalName,value:t.panals.indexOf(e)}})})),1)],1),l("el-form-item",{attrs:{label:"sqlStatement"}},[l("el-input",{attrs:{disabled:"",type:"char"},model:{value:null===t.panalRow||""===t.panalRow?"":t.panals[t.panalRow].sqlStatement,callback:function(e){t.$set(null===t.panalRow||""===t.panalRow?"":t.panals[t.panalRow],"sqlStatement",e)},expression:"(panalRow === null||panalRow === '')?'':panals[panalRow].sqlStatement"}})],1),l("el-form-item",{attrs:{label:"阈值"}},[l("el-input",{attrs:{type:"number"},model:{value:t.predictAdd.threshold,callback:function(e){t.$set(t.predictAdd,"threshold",e)},expression:"predictAdd.threshold"}})],1),l("el-form-item",{attrs:{label:"预测算法"}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:t.predictAdd.method,callback:function(e){t.$set(t.predictAdd,"method",e)},expression:"predictAdd.method"}},t._l(t.methods,(function(t){return l("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),l("el-form-item",{attrs:{label:"通知人电话(功能已实现，请填写真实电话)"}},[l("el-input",{attrs:{id:"main",type:"char"},model:{value:t.predictAdd.phone,callback:function(e){t.$set(t.predictAdd,"phone",e)},expression:"predictAdd.phone"}})],1)],1),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(e){return t.close()}}},[t._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.save()}}},[t._v("确 定")])],1)],1),l("el-dialog",{attrs:{title:"修改预警",visible:t.editing,width:"30%","before-close":t.close},on:{"update:visible":function(e){t.editing=e}}},[l("el-form",{attrs:{"label-width":"100px"}},[l("el-form-item",{attrs:{label:"预警ID"}},[l("el-input",{attrs:{disabled:"",type:"char"},model:{value:t.predictEdit.id,callback:function(e){t.$set(t.predictEdit,"id",e)},expression:"predictEdit.id"}})],1),l("el-form-item",{attrs:{label:"面板ID"}},[l("el-input",{attrs:{disabled:"",type:"char"},model:{value:t.predictEdit.panalId,callback:function(e){t.$set(t.predictEdit,"panalId",e)},expression:"predictEdit.panalId"}})],1),l("el-form-item",{attrs:{label:"面板名"}},[l("el-input",{attrs:{disabled:"",type:"char"},model:{value:t.predictEdit.panalName,callback:function(e){t.$set(t.predictEdit,"panalName",e)},expression:"predictEdit.panalName"}})],1),l("el-form-item",{attrs:{label:"sqlStatement"}},[l("el-input",{attrs:{disabled:"",type:"char"},model:{value:t.predictEdit.sqlStatement,callback:function(e){t.$set(t.predictEdit,"sqlStatement",e)},expression:"predictEdit.sqlStatement"}})],1),l("el-form-item",{attrs:{label:"预测算法)"}},[l("el-input",{attrs:{disabled:"",type:"char"},model:{value:t.predictEdit.method,callback:function(e){t.$set(t.predictEdit,"method",e)},expression:"predictEdit.method"}})],1),l("el-form-item",{attrs:{label:"阈值"}},[l("el-input",{attrs:{type:"number"},model:{value:t.predictEdit.threshold,callback:function(e){t.$set(t.predictEdit,"threshold",e)},expression:"predictEdit.threshold"}})],1),l("el-form-item",{attrs:{label:"通知人电话"}},[l("el-input",{attrs:{type:"char"},model:{value:t.predictEdit.phone,callback:function(e){t.$set(t.predictEdit,"phone",e)},expression:"predictEdit.phone"}})],1)],1),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(e){return t.close()}}},[t._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.save()}}},[t._v("确 定")])],1)],1)],1)},n=[],i=l("b775");function r(){return Object(i["a"])({url:"/sys-influx/remoteStatus/getAllPredict",method:"get"})}function d(t){return Object(i["a"])({url:"/sys-influx/remoteStatus/deletePredict",method:"delete",params:t})}function o(t){return Object(i["a"])({url:"/sys-influx/remoteStatus/addPredict",method:"post",data:t})}function s(t){return Object(i["a"])({url:"/sys-influx/remoteStatus/updatePredict",method:"put",data:t})}var c=l("1ca8"),u={name:"index",data:function(){return{myOptions:{startTimeout:100,highlight:!0,labels:{buttonSkip:"跳过",buttonPrevious:"上一步",buttonNext:"下一步",buttonStop:"关闭"}},steps:[{target:"#main",content:"测试显示：神经网络采用过往数据作为预训练模型，使用当前数据实时训练加预测，由于服务器资源有限，所以可能设置之后无法收到短信，但是本地测试CPU资源充足的时候可以收到",params:{placement:"center",highlight:!0}}],methods:[{value:"RNN",label:"RNN"},{value:"ARIMA",label:"ARIMA"},{value:"LSTM",label:"LSTM"},{value:"GRU",label:"GRU"}],editing:!1,adding:!1,tableData:[],influxDBs:[],panals:[],influxID:null,panalRow:null,predictAdd:{method:null,phone:"",threshold:null},predictEdit:{id:null,panalId:null,panalName:null,sqlStatement:null,method:"",phone:"",threshold:null}}},watch:{influxID:{immediate:!0,deep:!0,handler:function(t,e){var l=this;this.panalRow=null,this.panals=[],null!=t&&""!=t&&c["c"]({DBIndex:t}).then((function(t){console.log("panals",t.data),l.panals=t.data}))}}},created:function(){this.getPredicts()},mounted:function(){this.$tours["myTour1"].start()},methods:{setSellStyle:function(t){t.row,t.column,t.rowIndex,t.columnIndex;return"background-color:#409EFF;color:#fff;font-wight:200;font-size:15px;"},getPredicts:function(){var t=this;r().then((function(e){console.log("predicts",e.data.rows),t.tableData=e.data.rows}))},getInfluxs:function(){var t=this;c["d"]().then((function(e){console.log("influxs",e),t.influxDBs=e.data}))},editPredict:function(t){console.log("进入修改表单",t.predict,t.panal),this.predictEdit.id=t.predict.id,this.predictEdit.panalId=t.predict.panalId,this.predictEdit.panalName=t.panal.panalName,this.predictEdit.sqlStatement=t.panal.sqlStatement,this.predictEdit.phone=t.predict.phone,this.predictEdit.method=t.predict.method,this.predictEdit.threshold=t.predict.threshold,this.editing=!0},addPredict:function(){this.predictAdd.influxDBs=this.getInfluxs(),this.influxID="",this.predictAdd.panals=[],this.panalRow=null,this.predictAdd.phone="",this.predictAdd.threshold=null,this.predictAdd.method=null,this.adding=!0},delePredict:function(t){var e=this;this.$confirm("此操作将永久删除该预警, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){d({id:t.predict.id}).then((function(t){200==t.code?(e.$message({type:"success",message:"删除成功!"}),e.getPredicts()):e.$message({type:"error",message:"删除失败"})}))})).catch((function(){e.$message({type:"info",message:"取消删除"})}))},save:function(){var t=this;if(1==this.editing){if(console.log("修改界面"),this.predictEdit.threshold<=0)return void this.$message({type:"error",message:"信息错误!"});var e={id:this.predictEdit.id,panalId:this.predictEdit.panalId,method:this.predictEdit.method,threshold:this.predictEdit.threshold,phone:this.predictEdit.phone};s(e).then((function(e){200==e.code?(t.$message({type:"success",message:"修改成功!"}),t.getPredicts()):t.$message({type:"error",message:"修改失败"})}))}else{if(null===this.panalRow||""===this.panalRow||this.predictAdd.threshold<=0)return void this.$message({type:"error",message:"信息错误!"});var l={panalId:this.panals[this.panalRow].id,method:this.predictAdd.method,threshold:this.predictAdd.threshold,phone:this.predictAdd.phone};o(l).then((function(e){200==e.code?(t.$message({type:"success",message:"增加成功!"}),t.getPredicts()):t.$message({type:"error",message:"增加失败"})}))}this.close()},close:function(){this.adding=!1,this.editing=!1}}},p=u,h=l("2877"),m=Object(h["a"])(p,a,n,!1,null,"61fcb0ee",null);e["default"]=m.exports}}]);